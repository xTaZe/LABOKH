<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" xmlns:pr="http://primefaces.org/rio">

	<p:dataTable id="comptTB" var="compte"
		value="#{compteFidBean.compteFidelites}" widgetVar="comptesTable"
		paginator="true"
		paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
		rowsPerPageTemplate="20,50,100" rows="20" paginatorPosition="bottom"
		reflow="true" emptyMessage="CompteFidelite est vide">
		<f:facet name="header">
			<p:outputPanel>
				<h:outputText value="Liste des cartes de fidélité" />
				<p:commandButton icon="fa fa-plus Fs16 White"
					styleClass="BlueTextButton RaisedButton" style="float:right"
					action="#{compteFidBean.nouveauEnregistrement()}"
					update=":mainForm:fiche" oncomplete="PF('dlg').show()"
					process="@this" />
			</p:outputPanel>
		</f:facet>
		<p:column filterBy="#{compte.packCompt.typePack}"
			headerText="Pack Compte" filterMatchMode="contains"
			filterStyle="width:60%">
			<h:outputText value="#{compte.packCompt.typePack}" />
		</p:column>

		<p:column filterBy="#{compte.NCompt}" headerText="NCompt"
			filterMatchMode="contains" filterStyle="width:60%">
			<h:outputText value="#{compte.NCompt}" />
		</p:column>

		<p:column filterBy="#{compte.marque_1}" headerText="Marque"
			filterMatchMode="contains" filterStyle="width:60%">
			<h:outputText value="#{compte.marque_1}" />
		</p:column>
		<p:column filterBy="#{compte.modele}" headerText="Modele"
			filterMatchMode="contains" filterStyle="width:60%">
			<h:outputText value="#{compte.modele}" />

		</p:column>
		<p:column filterBy="#{compte.nom} #{compte.prenom}"
			headerText="Nom et Prénom" filterMatchMode="contains"
			filterStyle="width:60%;height:">
			<h:outputText value="#{compte.nom} #{compte.prenom}" />
		</p:column>
		<p:column filterBy="#{compte.nbPoints}" headerText="Nb points"
			filterMatchMode="exact" filterStyle="width:60%">
			<h:outputText value="#{compte.nbPoints}" />
		</p:column>
		<p:column filterBy="#{compte.entreprise1}" headerText="Entreprise"
			filterMatchMode="contains" filterStyle="width:60%">
			<h:outputText value="#{compte.entreprise1}" />
		</p:column>
		<p:column headerText="Action">
			<p:commandButton id="Editer" icon="fa  fa-pencil"
				action="#{compteFidBean.editEnregistrement()}"
				update=":mainForm:fiche" oncomplete="PF('dlg').show();"
				title="Editer" process="@this">
				<f:setPropertyActionListener value="#{compte}"
					target="#{compteFidBean.compte}" />
			</p:commandButton>
			<p:row rendered="#{compte.FActif eq true}">
				<p:commandButton title="Désactiver le compte"
					action="#{compteFidBean.activerDesactiver()}" immediate="true"
					icon="fa  fa-check" update=":mainForm:comptTB">
					<p:confirm header="Message de confirmation" icon="fa fa-check" />
					<f:setPropertyActionListener value="#{compte}"
						target="#{compteFidBean.compte}" />
				</p:commandButton>
			</p:row>
			<p:row rendered="#{compte.FActif eq false}">
				<p:commandButton title="Activer le compte"
					action="#{compteFidBean.activerDesactiver()}" immediate="true"
					icon="fa  fa-close" update=":mainForm:comptTB">
					<p:confirm header="Message de confirmation" icon="fa fa-check" />
					<f:setPropertyActionListener value="#{compte}"
						target="#{compteFidBean.compte}" />
				</p:commandButton>
			</p:row>

		</p:column>
	</p:dataTable>
	<p:confirmDialog global="true" showEffect="fade" hideEffect="explode">
		<f:facet name="message">
			<h:outputText
				value="vous êtes sur le point de changer l'état du compte fidélité  ! &lt;br/&gt;  êtes vous sûr?"
				escape="false" />
		</f:facet>

		<p:commandButton value="oui" type="button"
			styleClass="ui-confirmdialog-yes" icon="fa fa-check" />
		<p:commandButton value="non" type="button"
			styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
	</p:confirmDialog>


</ui:composition>