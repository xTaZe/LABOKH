<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" xmlns:pr="http://primefaces.org/rio">

	<p:dataTable id="comptTB" var="compte"
		value="#{clientsBean.compteFidelites}" widgetVar="comptesTable"
		paginator="true"
		paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
		rowsPerPageTemplate="5,10,15" rows="10" paginatorPosition="bottom"
		reflow="true" emptyMessage="Aucun enregistrement trouvé"
		selection="#{clientsBean.selectCompteFidelites}"
		rowKey="#{compte.idCmptFedilite}">
		<f:facet name="header">
			<p:outputPanel>
				<p:commandButton icon="fa fa-plus Fs16 White"
					styleClass="BlueTextButton RaisedButton" style="float:right"
					update=":mainForm:fiche" value="Contacter"
					action="#{clientsBean.nouveauEnregistrement()}"
					oncomplete="PF('dlg').show()" />
				<h:commandLink style="float : right ; ">
					<h:graphicImage name="images/pdf-icon.png" library="rio-layout"
						width="40" style="margin-right: 10px;" />
					<p:dataExporter type="pdf" target="comptTB" fileName="Clients"
						selectionOnly="false" pageOnly="false" />
				</h:commandLink>
				<h:commandLink style="float:right">
					<h:graphicImage name="images/xls-icon.png" library="rio-layout"
						width="40" style="margin-right: 10px;" />
					<p:dataExporter type="xls" target="comptTB" fileName="Clients"
						selectionOnly="false" pageOnly="false" />
				</h:commandLink>
				<h:outputText value="Liste des clients" />
			</p:outputPanel>
		</f:facet>
		<p:column selectionMode="multiple" width="10%" exportable="false"
			style="text-align:center;" />
		<p:column filterBy="#{compte.nom} #{compte.prenom}"
			headerText="Nom et Prénom" filterMatchMode="contains"
			filterStyle="width:60%">
			<h:outputText value="#{compte.nom} #{compte.prenom}" />
		</p:column>

		<p:column filterBy="#{compte.NCompt}" headerText="N° Compte"
			filterMatchMode="contains" filterStyle="width:60%">
			<h:outputText value="#{compte.NCompt}" />
		</p:column>

		<p:column filterBy="#{compte.packCompt.typePack}"
			style="text-align:center;" headerText="Pack Compte"
			filterMatchMode="contains" filterStyle="width:60%">
			<h:outputText value="#{compte.packCompt.typePack}" />
		</p:column>

		<p:column filterBy="#{compte.entreprise1}" headerText="Flotte"
			filterMatchMode="contains" filterStyle="width:60%">
			<h:outputText value="#{compte.entreprise1}" />
		</p:column>

		<p:column headerText="Nombre des Mouvements"
			style="text-align:center;">
			<h:outputText
				value="#{clientsBean.numberOfMouvement(compte.idCmptFedilite)}" />
		</p:column>
		<p:column filterBy="#{compte.nbPoints}" headerText="Nombre des points"
			sortBy="#{compte.nbPoints}" filterMatchMode="contains"
			filterStyle="width:60%" style="text-align:center;">
			<h:outputText value="#{compte.nbPoints}" />
		</p:column>
		<p:column headerText="Action" style="text-align:center;"
			exportable="false">
			<p:commandButton id="detail" icon="fa fa-search"
				action="#{clientsBean.detailsEnregistrement()}"
				update=":mainForm:detail" oncomplete="PF('dlg1').show();"
				title="Afficher Détails" process="@this">
				<f:setPropertyActionListener value="#{compte}"
					target="#{clientsBean.compte}" />
			</p:commandButton>
		</p:column>
	</p:dataTable>
</ui:composition>